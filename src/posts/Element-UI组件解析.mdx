---
title: Element-UIç»„ä»¶è§£æ
---

<aside>
ğŸ’¡ ç»„ä»¶ä¸Šå±‚å°è£…åŸºæœ¬ä¸Šéƒ½æ˜¯åŸºäºå·²æœ‰çš„UIç»„ä»¶åº“æˆ–è€…æ˜¯ç»“åˆä¸€äº›å‰ç«¯æ¡†æ¶å¼€è¿›è¡Œçš„ï¼Œå¦‚åˆ©ç”¨ElementUIæˆ–è€…antdè¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œåˆ©ç”¨Vue/Reactç­‰å‰ç«¯æ¡†æ¶ï¼Œç»“åˆä¸€ä¸‹UIåº“å¦‚TailwindCSSè¿›è¡ŒUIä¿®é¥°ï¼Œå®Œæˆå°è£…

</aside>

ElementUIï¼šForm ç»„ä»¶æ‹†è§£

<aside>
ğŸ’¡ Formç»„ä»¶ä¸€ç›´æ˜¯å„å¤§UIæ¡†æ¶çš„é‡å¤´æˆï¼Œä»¥ElementUIä¸ºä¾‹ï¼Œçœ‹çœ‹Formç»„ä»¶æ˜¯å¦‚ä½•è®¾è®¡çš„ã€‚

</aside>

å…ˆæ¥çœ‹çœ‹ ElementUI çš„ Form ç»„ä»¶æ˜¯å¦‚ä½•ä½¿ç”¨çš„

```html
<el-form :model="form" label-width="auto" style="max-width: 600px">
  <el-form-item label="Activity name" props="name">
    <el-input v-model="form.name" />
  </el-form-item>
</el-form>
```

el-form ç»„ä»¶ä½œä¸ºæœ€å¤–å±‚åŒ…è£¹çš„æ ‡ç­¾ï¼Œmodel å±æ€§æ˜¯æ•´ä¸ª form ç»„ä»¶ä¼ å…¥çš„å¯¹è±¡ï¼Œå†…éƒ¨çš„ form-item åŒ…è£¹äº†å…·ä½“ç»„ä»¶å†…å®¹ï¼Œä½œä¸ºæ¯ä¸ª form ç»„ä»¶çš„å…·ä½“è¡¨ç°å½¢å¼ï¼Œåœ¨ form-item æ ‡ç­¾ä¸Šçš„å±æ€§ props åˆ™æ˜¯æ¥æ”¶ form ä¼ å…¥çš„ model å¯¹è±¡çš„å±æ€§å€¼ï¼Œä¸éœ€è¦åœ¨ input ä¸ŠæŒ‡å®š v-modelï¼Œå³å¯æ›´æ–° form.name çš„å€¼ï¼Œé‚£ä¹ˆè¿™é‡Œé¢æ˜¯æ€ä¹ˆåšçš„å‘¢ã€‚

```html
<--! Formç»„ä»¶ -->
<template>
  <form :class="formClasses">
    <slot />
  </form>
</template>
```

ä¸Šé¢çš„ Form ç»„ä»¶èƒ½çœ‹åˆ°ï¼ŒElementUI çš„ Form ç»„ä»¶æ˜¯ç”¨çš„ html åŸå£°çš„ form æ ‡ç­¾å®ç°çš„ï¼Œä¼ å…¥ä¸€ä¸ª formClasses è¦†ç›–åŸå£°çš„ class æ ·å¼

Form ç»„ä»¶ç”¨äº† provide/inject ä¾èµ–æ³¨å…¥çš„æ–¹å¼ä¼ é€’æ·±å±‚æ¬¡å±æ€§ï¼Œé¦–å…ˆè¿›è¡Œ provide ä¾èµ–æ”¶é›†

```tsx
provide(
  formContextKey,
  reactive({
    ...toRefs(props),
    emit,

    resetFields,
    clearValidate,
    validateField,
    getField,
    addField,
    removeField,

    ...useFormLabelWidth(),
  })
)
è¿™é‡Œçš„formContextKeyæ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œç”¨symbolä¿®é¥°çš„å˜é‡
export const formContextKey: InjectionKey<FormContext> =
  Symbol('formContextKey')
export const formItemContextKey: InjectionKey<FormItemContext> =
  Symbol('formItemContextKey')
```

ä¸Šé¢çš„ emit æ˜¯ form ç»„ä»¶å¯¼å‡ºçš„æ–¹æ³•ï¼švalidateï¼Œä»¥åŠ resetField ä¹‹ç±»çš„éƒ½æ˜¯ form å…¨å±€æ–¹æ³•ï¼Œé€šè¿‡ form å…¨å±€ä¾èµ–æ³¨å…¥åˆ° formContextKey ä¸Šï¼Œå…·ä½“ä½¿ç”¨åœºæ™¯ä¸¾ä¸ªä¾‹å­ï¼š

```tsx
const formRef = ref(); // èµ‹å€¼ç»™Formç»„ä»¶çš„refå±æ€§å˜é‡

formRef.validate();
formRef.resetFields();

// è¿™é‡Œçš„formRefæ˜¯èµ‹å€¼ç»™elFormç»„ä»¶çš„refå˜é‡ï¼Œä½¿ç”¨çš„å°±æ˜¯Formç»„ä»¶å¯¼å‡ºçš„å…¨å±€å˜é‡
```

Form ç»„ä»¶å®Œæˆäº†ä¸€äº›å…¨å±€æ–¹æ³•çš„æ³¨å†Œï¼Œå¤–å±‚ props çš„å®šä¹‰ï¼Œä»¥åŠé¡¶å±‚ form æ ‡ç­¾çš„æ„å»ºï¼Œé‚£ä¹ˆ formItem æ˜¯å¦‚ä½•æ¥æ”¶è¿™äº›å±æ€§çš„å‘¢ï¼šinject

```tsx
const formContext = inject(formContextKey, undefined);
const parentFormItemContext = inject(formItemContextKey, undefined);
// formContextå°±æ˜¯ä»Formç»„ä»¶ä¼ å…¥çš„å±æ€§å†…å®¹
// å°†Formç»„ä»¶çš„å±æ€§modelçš„æ•°æ®è·å–ä¹‹åï¼Œè¿”å›å¯¹åº”çš„valueï¼Œç”¨äºåœ¨formItemä¸­è¿›è¡Œè¡¨å•æ ¡éªŒç­‰å¤„ç†
const fieldValue = computed(() => {
  const model = formContext?.model;
  if (!model || !props.prop) {
    return;
  }
  return getProp(model, props.prop).value;
});

// è¿™é‡Œè·å–çš„propStringå°±æ˜¯åœ¨formItemæ ‡ç­¾ä¸Šçš„å±æ€§propçš„å†…å®¹ï¼Œè¡¨ç¤ºè·å–æ¯ä¸ªformItemçš„å­—æ®µ
const propString = computed(() => {
  if (!props.prop) return "";
  return isString(props.prop) ? props.prop : props.prop.join(".");
});

// å¯¹æ¯ä¸ªformItemä¸Šçš„propå±æ€§è¿›è¡Œè¡¨å•æ£€éªŒå¤„ç†
const doValidate = async (rules: RuleItem[]): Promise<true> => {
  const modelName = propString.value;
  const validator = new AsyncValidator({
    [modelName]: rules,
  });
  return validator
    .validate({ [modelName]: fieldValue.value }, { firstFields: true })
    .then(() => {
      onValidationSucceeded();
      return true as const;
    })
    .catch((err: FormValidateFailure) => {
      onValidationFailed(err as FormValidateFailure);
      return Promise.reject(err);
    });
};
```

è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå¦‚ä½•å°† formItem ä¸‹çš„ç»„ä»¶çš„å€¼èµ‹å€¼ç»™ model.prop çš„å±æ€§ä¸Š

```tsx
// è¿™é‡Œmodel.propä¼šå°†å€¼ä½œä¸ºfieldValueçš„é»˜è®¤å€¼
const fieldValue = computed(() => {
  const model = formContext?.model;
  if (!model || !props.prop) {
    return;
  }
  return getProp(model, props.prop).value;
});

initialValue = clone(fieldValue.value);

// é‚£ä¹ˆåœ¨inputç­‰ç»„ä»¶çš„å€¼å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼ŒformItemåˆæ˜¯å¦‚ä½•ç›‘å¬åˆ°å€¼çš„å˜åŒ–å¹¶ä¸”å®Œæˆmodel.propçš„æ›´æ–°çš„å‘¢
// è¿™é‡Œç”¨computedè®¡ç®—å±æ€§ï¼Œè¿”å›model.propçš„å€¼ï¼Œè€Œåœ¨inputç­‰ç»„ä»¶ä¸Šä½¿ç”¨v-modelå¯¹model.propå®ç°æ•°æ®çš„åŒå‘ç»‘å®š
// å› æ­¤formItemä¸‹çš„inputç­‰ç»„ä»¶å¿…é¡»è¦æ˜¾ç¤ºçš„å°†model.propåŒå‘ç»‘å®šä¸Š
const fieldValue = computed(() => {
  const model = formContext?.model;
  if (!model || !props.prop) {
    return;
  }
  return getProp(model, props.prop).value;
});

// æ­¤å¤–ï¼Œinputç»„ä»¶ä¼šä¼ å…¥formå±æ€§ï¼Œè¿™ä¸ªformå±æ€§çš„å€¼å°±æ˜¯ä»Formç»„ä»¶å…¨å±€å¯¼å‡ºçš„ï¼Œç”¨äºç¡®å®šformè¡¨å•ä¸‹çš„idå¯¹åº”å€¼
// åŒä¸€ä¸ªidå¯¹åº”çš„è¡¨å•é¡¹ä¼šäº’ç›¸å…³è”
```

```html
<input :id="inputId" :form="form" />

const { form: elForm, formItem: elFormItem } = useFormItem() <--!
è¿™é‡Œçš„inputIdå’ŒFormå¯¼å‡ºçš„æ˜¯åŒä¸€ä¸ªå®ä¾‹ -->
```

<aside>
ğŸ’¡ æ€»ç»“ï¼šFormå’ŒFormItemä¹‹é—´çš„æ•°æ®ä¼ é€’æ˜¯ç”¨çš„provideå’Œinjectï¼ŒFormItemç»„ä»¶ä¸‹çš„inputç­‰ç»„ä»¶çš„æ•°æ®åŒå‘ç»‘å®šåˆ™æ˜¯å€ŸåŠ©äº†formå±æ€§å’Œidå±æ€§ï¼Œå°è£…äº†formItemHooksç”¨äºç»„ä»¶å†…éƒ¨è°ƒç”¨ä»¥ä½¿ç”¨Formå’ŒFormItemè¿™ä¸¤ä¸ªå…¨å±€å˜é‡ï¼Œæ‰€æœ‰çš„å…¨å±€æ–¹æ³•ä»¥defineExposeçš„å½¢å¼å¯¼å‡º

</aside>

ElementUIï¼šTable ç»„ä»¶

<aside>
ğŸ’¡ Tableç»„ä»¶çš„éš¾ç‚¹ä¸»è¦åœ¨è¡¨æ ¼å®½é«˜è‡ªé€‚åº”ï¼Œå›ºå®šè¡Œå’Œåˆ—ï¼Œå¤šçº§è¡¨æ ¼çš„æ ·å¼ï¼Œæ˜¯æ¯”Formç»„ä»¶çš„è®¾è®¡éš¾åº¦æ›´åŠ å¤§çš„å­˜åœ¨

</aside>

Table ç»„ä»¶å¯¼å‡ºäº†ä¸¤ä¸ªç»„ä»¶æ¨¡å—ï¼šTable å’Œ TableColumnï¼Œå…ˆæ¥çœ‹çœ‹ Table ç»„ä»¶çš„è®¾è®¡

æ•´ä¸ª Table ç»„ä»¶çš„ template éƒ¨åˆ†åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œæ•´ä¸ªç»„ä»¶ç”±å¤–å±‚çš„ tableWrapper åŒ…è£¹ï¼ŒtableWrapper å¤–å±‚å¸ƒå±€èåˆäº†ä¼ å…¥çš„ style å’Œ class å±æ€§ï¼Œè§„å®šäº† table æ•´ä½“çš„å¸ƒå±€ï¼Œè¿™äº› style å’Œ class ä»¥å‘½åç©ºé—´çš„å½¢å¼åŠ¨æ€çš„åŠ è½½åˆ° class ä¸­

table çš„æ ¸å¿ƒåˆ†ä¸ºï¼šåŸç”Ÿ table åŒ…è£¹ï¼Œtable-header ç»„ä»¶ï¼Œtable-bodyï¼Œtable-footer

å…¶ä¸­ï¼ŒbodyWrapper ä¸‹ä½¿ç”¨äº† scrollbar ç»„ä»¶åŒ…è£¹ï¼Œç›®çš„æ˜¯è§£å†³è¡¨æ ¼è¶…å‡ºå½“å‰é¡µé¢é«˜åº¦æ—¶ï¼Œå‡ºç°æ»šåŠ¨æ¡

```html
<div ref="bodyWrapper" :class="ns.e('body-wrapper')">
  <el-scrollbar
    ref="scrollBarRef"
    :view-style="scrollbarViewStyle"
    :wrap-style="scrollbarStyle"
    :always="scrollbarAlwaysOn"
  >
    <table
      ref="tableBody"
      :class="ns.e('body')"
      cellspacing="0"
      cellpadding="0"
      border="0"
      :style="{
              width: bodyWidth,
              tableLayout,
            }"
    >
      <hColgroup
        :columns="store.states.columns.value"
        :table-layout="tableLayout"
      />
      <table-header
        v-if="showHeader && tableLayout === 'auto'"
        ref="tableHeaderRef"
        :class="ns.e('body-header')"
        :border="border"
        :default-sort="defaultSort"
        :store="store"
        @set-drag-visible="setDragVisible"
      />
      <table-body
        :context="context"
        :highlight="highlightCurrentRow"
        :row-class-name="rowClassName"
        :tooltip-effect="tooltipEffect"
        :tooltip-options="tooltipOptions"
        :row-style="rowStyle"
        :store="store"
        :stripe="stripe"
      />
      <table-footer
        v-if="showSummary && tableLayout === 'auto'"
        :class="ns.e('body-footer')"
        :border="border"
        :default-sort="defaultSort"
        :store="store"
        :sum-text="computedSumText"
        :summary-method="summaryMethod"
      />
    </table>
    <div
      v-if="isEmpty"
      ref="emptyBlock"
      :style="emptyBlockStyle"
      :class="ns.e('empty-block')"
    >
      <span :class="ns.e('empty-text')">
        <slot name="empty">{{ computedEmptyText }}</slot>
      </span>
    </div>
    <div
      v-if="$slots.append"
      ref="appendWrapper"
      :class="ns.e('append-wrapper')"
    >
      <slot name="append" />
    </div>
  </el-scrollbar>
</div>
```

table-footer æ˜¯ä¸ºäº†æ˜¾ç¤ºä»€ä¹ˆå†…å®¹å‘¢ï¼Œä¸Šå›¾èƒ½çœ‹åˆ° showSummaryï¼Œå½“éœ€è¦æ˜¾ç¤ºè¡¨æ ¼æ€»è®¡çš„æƒ…å†µæ—¶ï¼Œå°±åœ¨ table-footer ä¸Šæ˜¾ç¤º

ä¸€ä¸ªä¸€ä¸ªåˆ†æ Table ç»„ä»¶ï¼Œä» table-header å¼€å§‹

table-header æ˜¯ç”¨çš„ h()æ–¹æ³•æ¸²æŸ“çš„ UIï¼Œå¯¼å‡ºçš„æ˜¯ä¸€ä¸ªå«æœ‰ setup æ–¹æ³•å¹¶ä¸”è¿”å›ç”¨ h å‡½æ•°æ¸²æŸ“çš„ dom ç»“æ„ï¼Œå…·ä½“è®¾è®¡å¦‚ä¸‹

```jsx
return h(
  "thead",
  {
    class: { [ns.is("group")]: isGroup },
  },
  columnRows.map((subColumns, rowIndex) =>
    h(
      "tr",
      {
        class: getHeaderRowClass(rowIndex),
        key: rowIndex,
        style: getHeaderRowStyle(rowIndex),
      },
      subColumns.map((column, cellIndex) => {
        if (column.rowSpan > rowSpan) {
          rowSpan = column.rowSpan;
        }
        return h(
          "th",
          {
            class: getHeaderCellClass(rowIndex, cellIndex, subColumns, column),
            colspan: column.colSpan,
            key: `${column.id}-thead`,
            rowspan: column.rowSpan,
            style: getHeaderCellStyle(rowIndex, cellIndex, subColumns, column),
            onClick: ($event) => handleHeaderClick($event, column),
            onContextmenu: ($event) => handleHeaderContextMenu($event, column),
            onMousedown: ($event) => handleMouseDown($event, column),
            onMousemove: ($event) => handleMouseMove($event, column),
            onMouseout: handleMouseOut,
          },
          [
            h(
              "div",
              {
                class: [
                  "cell",
                  column.filteredValue && column.filteredValue.length > 0
                    ? "highlight"
                    : "",
                ],
              },
              [
                column.renderHeader
                  ? column.renderHeader({
                      column,
                      $index: cellIndex,
                      store,
                      _self: $parent,
                    })
                  : column.label,
                column.sortable &&
                  h(
                    "span",
                    {
                      onClick: ($event) => handleSortClick($event, column),
                      class: "caret-wrapper",
                    },
                    [
                      h("i", {
                        onClick: ($event) =>
                          handleSortClick($event, column, "ascending"),
                        class: "sort-caret ascending",
                      }),
                      h("i", {
                        onClick: ($event) =>
                          handleSortClick($event, column, "descending"),
                        class: "sort-caret descending",
                      }),
                    ]
                  ),
                column.filterable &&
                  h(FilterPanel, {
                    store,
                    placement: column.filterPlacement || "bottom-start",
                    column,
                    upDataColumn: (key, value) => {
                      column[key] = value;
                    },
                  }),
              ]
            ),
          ]
        );
      })
    )
  )
);
```

table-body å’Œ table-header çš„æ€è·¯ç›¸ä¼¼ï¼Œä¹Ÿæ˜¯åˆ©ç”¨ trã€tdã€tbody è¿™äº›åŸç”Ÿæ ‡ç­¾å®ç° dom çš„æ„å»º

```jsx
// tbodyçš„renderå®ç°
return h("tbody", { tabIndex: -1 }, [
  data.reduce((acc: VNode[], row) => {
    return acc.concat(wrappedRowRender(row, acc.length));
  }, []),
]);
```

```jsx
// tfootæ ‡ç­¾çš„renderå®ç°
return h(
      h('tfoot', [
        h('tr', {}, [
          ...columns.map((column, cellIndex) =>
            h(
              'td',
              {
                key: cellIndex,
                colspan: column.colSpan,
                rowspan: column.rowSpan,
                class: getCellClasses(columns, cellIndex),
                style: getCellStyles(column, cellIndex),
              },
              [
                h(
                  'div',
                  {
                    class: ['cell', column.labelClassName],
                  },
                  [sums[cellIndex]]
                ),
              ]
            )
          ),
        ]),
      ])
```

# å¯ä»¥å€Ÿé‰´çš„ä¸€äº›åšæ³•

- Styleï¼šå’Œæ ·å¼ç›¸å…³çš„å†…å®¹ï¼Œæ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶å†…ï¼Œå¦‚ styles-helper.tsï¼Œé¿å…æ ·å¼å¤±æ•ˆï¼Œè¦æ³¨æ„ style è¡Œå†…æ ·å¼é¡ºåºï¼Œclassnames çš„åˆå¹¶æ³¨æ„åŒå class
- Eventsï¼šemit äº‹ä»¶æ”¾åœ¨ events-hepler.ts
- å°†ä¸åŒçš„æ¸²æŸ“å†…å®¹åŒºåˆ†å¼€ï¼šå¦‚ table çš„ footerã€headerã€column ç­‰ç­‰ï¼Œéƒ½æ˜¯ä½œä¸ºå•ç‹¬ render çš„ç»„ä»¶èšåˆåˆ°ä¸€èµ·
- Provider å’Œ Inject çš„ key ç”¨ symbol ä¿®é¥°ï¼Œå¹¶ä¸”ä½¿ç”¨å¸¸é‡å‘½åï¼Œæ³¨æ„ï¼Œä½¿ç”¨ ts ç±»å‹æ–­è¨€çš„ as const
- æ˜¯å¦éœ€è¦ä½¿ç”¨ storeï¼Œçœ‹ç»„ä»¶çš„å¤æ‚ç¨‹åº¦ï¼Œelement-UI ä¸­çš„ Table å’Œ Form å‡ä½¿ç”¨äº† storeï¼Œstore ä¼šå¢åŠ ç»„ä»¶çš„å¤æ‚åº¦ï¼Œè°¨æ…ä½¿ç”¨
- Vue3 ç‰ˆæœ¬ä¸­æ¨èä½¿ç”¨ hooks æŠ½è±¡é€»è¾‘
- å•å…ƒæµ‹è¯•ï¼šå¼€å‘ç»„ä»¶ä¸€å®šè¦åŠ å…¥å•å…ƒæµ‹è¯•ï¼Œç›®çš„æ˜¯ä¸ºäº†å‘ç°ç»„ä»¶è®¾è®¡çš„ç›²ç‚¹å’Œä¸åˆç†çš„åœ°æ–¹ï¼Œç”šè‡³æ˜¯å†…å­˜ç®¡ç†é—®é¢˜ã€‚

# æœ€åï¼Œé™„ä¸Š Element-UI çš„ä»“åº“åœ°å€å’Œæ–‡æ¡£åœ°å€

[Element-UI æ–‡æ¡£](https://element-plus.org/zh-CN/component/form.html)

[Element-Git ä»“åº“](https://github.com/element-plus/element-plus/tree/dev/packages)
